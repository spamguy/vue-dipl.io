<template>
    <use :xlink:href="unitIcon"
        :id="unit.Province + 'Unit'"
        :style="unitStyle"
        :transform="unitTransform"
    />
</template>

<script>
    export default {
        name: 'map-unit',
        props: ['unit', 'data'],
        computed: {
            unitIcon() {
                switch (this.unit.Unit.Type) {
                case 'Army': return '/static/army.svg#army';
                case 'Fleet': return '/static/fleet.svg#fleet';
                default: return '';
                }
            },
            unitStyle() {
                return this.data ? { fill: this.data.colour } : { display: 'none' };
            },
            unitTransform() {
                if (!this.data)
                    return '';

                // These coordinates are already nudged SW of the SC marker. Counter-nudge them a little closer.
                const x = this.data.x - 5;
                const y = this.data.y - 5;
                return `translate(${x},${y}) scale(0.05)`;
            }
        }
    };
</script>
